{"ast":null,"code":"import _regeneratorRuntime from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{API_BASE_URL}from'../../constants/apiConstants';import axios from'axios';import{withRouter}from\"react-router-dom\";import Modal from'react-bootstrap/Modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RegistrationForm(props){var _useState=useState({email:\"\",password:\"\",confirmPassword:\"\",errorMessage:null,successMessage:null,onSend:false}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,value=_e$target.value;setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},id,value));});};var handleSubmitClick=function handleSubmitClick(e){e.preventDefault();if(state.password===state.confirmPassword){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'onSend':true});});Promise.resolve().then(sendDetailsToServer).catch(function(error){return console.log(error);});}else{setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'errorMessage':'Passwords do not match'});});}};var redirectToHome=function redirectToHome(){props.history.push('/home');};var redirectToLogin=function redirectToLogin(){props.history.push('/login');};var sendDetailsToServer=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(state.email.length&&state.password.length){payload={\"email\":state.email,\"password\":state.password};axios.post(API_BASE_URL+'/user/register',payload).then(function(response){if(response.status===200){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'successMessage':\"You have successfully registered. Please check your mail and verify your account.\",'errorMessage':null});});}else{setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'errorMessage':response.data,'successMessage':null,'onSend':false});});}}).catch(function(error){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'errorMessage':error.response.data,'successMessage':null,'onSend':false});});});}else{setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'errorMessage':'Please enter valid username and password','successMessage':null});});}case 1:case\"end\":return _context.stop();}}},_callee);}));return function sendDetailsToServer(){return _ref.apply(this,arguments);};}();var handleClose=function handleClose(){redirectToHome();};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{show:true,onHide:function onHide(){return handleClose();},animation:false,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:\"Register\"}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-left\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\",value:state.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-left\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Password\",value:state.password,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-left\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"confirmPassword\",placeholder:\"Confirm Password\",value:state.confirmPassword,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:handleSubmitClick,disabled:state.onSend?\"true\":\"\",children:\"Register\"})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Already have an account? \"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return redirectToLogin();},children:\"Login here\"})]}),/*#__PURE__*/_jsx(\"section\",{class:state.errorMessage?\"alert alert-danger\":\"\",role:\"alert\",children:state.errorMessage}),/*#__PURE__*/_jsx(\"section\",{class:state.successMessage?\"alert alert-success\":\"\",role:\"alert\",children:state.successMessage})]})]})});}export default withRouter(RegistrationForm);","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/Dialogs/RegistrationForm.js"],"names":["React","useState","API_BASE_URL","axios","withRouter","Modal","RegistrationForm","props","email","password","confirmPassword","errorMessage","successMessage","onSend","state","setState","handleChange","e","target","id","value","prevState","handleSubmitClick","preventDefault","Promise","resolve","then","sendDetailsToServer","catch","error","console","log","redirectToHome","history","push","redirectToLogin","length","payload","post","response","status","data","handleClose"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { API_BASE_URL } from '../../constants/apiConstants';\nimport axios from 'axios';\nimport { withRouter } from \"react-router-dom\";\nimport Modal from 'react-bootstrap/Modal';\n\nfunction RegistrationForm(props) {\n    const [state, setState] = useState({\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        errorMessage: null,\n        successMessage: null,\n        onSend: false,\n    })\n    const handleChange = (e) => {\n        const { id, value } = e.target\n        setState(prevState => ({\n            ...prevState,\n            [id]: value\n        }))\n    }\n    const handleSubmitClick = (e) => {\n        e.preventDefault();\n        if (state.password === state.confirmPassword) {\n            setState(prevState => ({\n                ...prevState,\n                'onSend': true,\n            }));\n            Promise.resolve()\n            .then(sendDetailsToServer)\n            .catch(error => console.log(error));\n        } else {\n            setState(prevState => ({\n                ...prevState,\n                'errorMessage': 'Passwords do not match'\n            }))\n        }\n    }\n\n    const redirectToHome = () => {\n        props.history.push('/home');\n    }\n\n    const redirectToLogin = () => {\n        props.history.push('/login');\n    }\n\n    const sendDetailsToServer = async () => {\n        if (state.email.length && state.password.length) {\n            const payload = {\n                \"email\": state.email,\n                \"password\": state.password,\n            }\n            axios.post(API_BASE_URL + '/user/register', payload)\n                .then(function (response) {\n                    if (response.status === 200) {\n                        setState(prevState => ({\n                            ...prevState,\n                            'successMessage': \"You have successfully registered. Please check your mail and verify your account.\",\n                            'errorMessage': null,\n                        }))\n                    } else {\n                        setState(prevState => ({\n                            ...prevState,\n                            'errorMessage': response.data,\n                            'successMessage': null,\n                            'onSend': false,\n                        }))\n                    }\n                })\n                .catch(function (error) {\n                    setState(prevState => ({\n                        ...prevState,\n                        'errorMessage': error.response.data,\n                        'successMessage': null,\n                        'onSend': false\n                    }))\n                });\n        } else {\n            setState(prevState => ({\n                ...prevState,\n                'errorMessage': 'Please enter valid username and password',\n                'successMessage': null,\n            }))\n        }\n    }\n\n    const handleClose = () => {\n        redirectToHome();\n    }\n\n    return (\n        <div>\n            <Modal show={true} onHide={() => handleClose()} animation={false}>\n                <Modal.Header closeButton>\n                    Register\n                </Modal.Header>\n                <Modal.Body>\n                    <form>\n                        <div className=\"form-group text-left\">\n                            <label htmlFor=\"exampleInputEmail1\">Email address</label>\n                            <input type=\"email\"\n                                className=\"form-control\"\n                                id=\"email\"\n                                aria-describedby=\"emailHelp\"\n                                placeholder=\"Enter email\"\n                                value={state.email}\n                                onChange={handleChange}\n                            />\n                            <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n                        </div>\n                        <div className=\"form-group text-left\">\n                            <label htmlFor=\"exampleInputPassword1\">Password</label>\n                            <input type=\"password\"\n                                className=\"form-control\"\n                                id=\"password\"\n                                placeholder=\"Password\"\n                                value={state.password}\n                                onChange={handleChange}\n                            />\n                        </div>\n                        <div className=\"form-group text-left\">\n                            <label htmlFor=\"exampleInputPassword1\">Confirm Password</label>\n                            <input type=\"password\"\n                                className=\"form-control\"\n                                id=\"confirmPassword\"\n                                placeholder=\"Confirm Password\"\n                                value={state.confirmPassword}\n                                onChange={handleChange}\n                            />\n                        </div>\n                        <button\n                            type=\"submit\"\n                            className=\"btn btn-primary\"\n                            onClick={handleSubmitClick}\n                            disabled={state.onSend ? \"true\" :\"\"}\n                        >\n                            Register\n                </button>\n                    </form>\n                </Modal.Body>\n                <Modal.Footer>\n                    <div className=\"mt-2\">\n                        <span>Already have an account? </span>\n                        <button className=\"btn btn-primary\" onClick={() => redirectToLogin()}>Login here</button>\n                    </div>\n                    <section class={state.errorMessage ? \"alert alert-danger\" : \"\"} role=\"alert\">\n                        {state.errorMessage}\n                    </section>\n                    <section class={state.successMessage ? \"alert alert-success\" : \"\"} role=\"alert\">\n                        {state.successMessage}\n                    </section>\n                </Modal.Footer>\n            </Modal>\n        </div>\n    )\n}\n\nexport default withRouter(RegistrationForm);"]},"metadata":{},"sourceType":"module"}