{"ast":null,"code":"import _regeneratorRuntime from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./MusicCollection.css';import axios from'axios';import Playlist from'./Playlist';import{API_BASE_URL,ACCESS_TOKEN_NAME}from'../../constants/apiConstants';import CreatePlaylistDialog from'../Dialogs/CreatePlaylistDialog';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MusicCollection=/*#__PURE__*/function(_React$Component){_inherits(MusicCollection,_React$Component);var _super=_createSuper(MusicCollection);function MusicCollection(props){var _this;_classCallCheck(this,MusicCollection);_this=_super.call(this,props);_this.state={playlistCollection:null};_this.onChangePlaylists=_this.onChangePlaylists.bind(_assertThisInitialized(_this));_this.reloadCollection=_this.reloadCollection.bind(_assertThisInitialized(_this));_this.addPlaylistPost=_this.addPlaylistPost.bind(_assertThisInitialized(_this));_this.onSongChange=_this.onSongChange.bind(_assertThisInitialized(_this));return _this;}_createClass(MusicCollection,[{key:\"componentDidMount\",value:function componentDidMount(){this.reloadCollection();}},{key:\"onChangePlaylists\",value:function onChangePlaylists(playlistName){var _this2=this;Promise.resolve().then(this.addPlaylistPost(playlistName).then(function(result){_this2.setState({playlistCollection:result});}));}},{key:\"onSongChange\",value:function onSongChange(result){this.setState({playlistCollection:result});}},{key:\"addPlaylistPost\",value:function(){var _addPlaylistPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(playlistName){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",axios.post(API_BASE_URL+'/media/addPlaylist',{name:playlistName},{headers:{\"auth-token\":localStorage.getItem(ACCESS_TOKEN_NAME)}}).then(function(response){if(response.status===200){return response.data.affected;}}).catch(function(error){console.log(error);}));case 1:case\"end\":return _context.stop();}}},_callee);}));function addPlaylistPost(_x){return _addPlaylistPost.apply(this,arguments);}return addPlaylistPost;}()},{key:\"loadMusicCollectionGet\",value:function(){var _loadMusicCollectionGet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data=axios.get(API_BASE_URL+'/media/loadMusicCollection',{headers:{\"auth-token\":localStorage.getItem(ACCESS_TOKEN_NAME)}}).then(function(res){return res.data;}).catch(function(error){console.log(error);});return _context2.abrupt(\"return\",data);case 2:case\"end\":return _context2.stop();}}},_callee2);}));function loadMusicCollectionGet(){return _loadMusicCollectionGet.apply(this,arguments);}return loadMusicCollectionGet;}()},{key:\"reloadCollection\",value:function reloadCollection(){var _this3=this;Promise.resolve(this.loadMusicCollectionGet()).then(function(collection){_this3.setState({playlistCollection:collection});});}},{key:\"render\",value:function render(){var _this4=this;if(this.state.playlistCollection){return/*#__PURE__*/_jsxs(\"section\",{className:\"library\",children:[/*#__PURE__*/_jsx(CreatePlaylistDialog,{parentCallback:this.onChangePlaylists}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group collection\",children:this.state.playlistCollection['musicCollection'].map(function(playlist,index){return/*#__PURE__*/_jsx(\"li\",{id:\"frame\",className:\"list-group-item\",children:/*#__PURE__*/_jsx(Playlist,{playlistName:playlist.name,playlistID:playlist._id,songCollection:playlist.songList?playlist.songList:[],parentCallback:_this4.onSongChange,updateCurrentSong:_this4.props.updateCurrentSong})},index);})})]});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})})});}}}]);return MusicCollection;}(React.Component);export default MusicCollection;","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js"],"names":["React","axios","Playlist","API_BASE_URL","ACCESS_TOKEN_NAME","CreatePlaylistDialog","MusicCollection","props","state","playlistCollection","onChangePlaylists","bind","reloadCollection","addPlaylistPost","onSongChange","playlistName","Promise","resolve","then","result","setState","post","name","headers","localStorage","getItem","response","status","data","affected","catch","error","console","log","get","res","loadMusicCollectionGet","collection","map","playlist","index","_id","songList","updateCurrentSong","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './MusicCollection.css';\nimport axios from 'axios';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\n\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog'\n\nclass MusicCollection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            playlistCollection: null,\n        }\n        this.onChangePlaylists = this.onChangePlaylists.bind(this);\n        this.reloadCollection = this.reloadCollection.bind(this);\n        this.addPlaylistPost = this.addPlaylistPost.bind(this);\n        this.onSongChange = this.onSongChange.bind(this);\n    }\n\n    componentDidMount() {\n        this.reloadCollection();\n    }\n\n    onChangePlaylists(playlistName) {\n        Promise.resolve()\n            .then(this.addPlaylistPost(playlistName).then(result => {\n                this.setState({\n                    playlistCollection: result\n                });\n            }));\n    }\n\n    onSongChange(result) {\n        this.setState({\n            playlistCollection: result\n        });\n    }\n\n    async addPlaylistPost(playlistName) {\n        return axios.post(API_BASE_URL + '/media/addPlaylist', { name: playlistName }, { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(function (response) {\n                if (response.status === 200) {\n                    return response.data.affected;\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n\n    async loadMusicCollectionGet() {\n        var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(res => { return res.data }).catch(function (error) {\n                console.log(error);\n            })\n        return data;\n    }\n\n    reloadCollection() {\n        Promise.resolve(this.loadMusicCollectionGet()).then((collection) => {\n            this.setState({\n                playlistCollection: collection\n            });\n        })\n    }\n\n    render() {\n        if (this.state.playlistCollection) {\n            return (\n                <section className='library'>\n                        <CreatePlaylistDialog parentCallback={this.onChangePlaylists} />\n                        <ul className=\"list-group collection\">\n                            {\n                                this.state.playlistCollection['musicCollection'].map((playlist, index) => {\n                                    return (\n                                        <li id=\"frame\" className=\"list-group-item\" key={index}>\n                                            <Playlist\n                                                playlistName={playlist.name}\n                                                playlistID={playlist._id}\n                                                songCollection={playlist.songList ? playlist.songList : []}\n                                                parentCallback={this.onSongChange}\n                                                updateCurrentSong={this.props.updateCurrentSong}\n                                            >\n                                            </Playlist>\n                                        </li>\n                                    )\n                                })}\n\n                        </ul>\n                </section>\n            )\n        } else {\n            return (\n                <div className=\"d-flex justify-content-center\">\n                    <div className=\"spinner-border\" role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                    </div>\n                </div>\n            )\n        }\n    }\n}\n\nexport default MusicCollection;"]},"metadata":{},"sourceType":"module"}