{"ast":null,"code":"import _regeneratorRuntime from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Header.css';import{withRouter}from\"react-router-dom\";import{ACCESS_TOKEN_NAME}from'../../../constants/apiConstants';import axios from'axios';import{API_BASE_URL}from'../../../constants/apiConstants';import Cookies from'universal-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=/*#__PURE__*/function(_React$Component){_inherits(Header,_React$Component);var _super=_createSuper(Header);function Header(props){var _this;_classCallCheck(this,Header);_this=_super.call(this,props);_this.openMenu=function(event){_this.setState({anchorEl:event.currentTarget,isOpen:true});};_this.closeMenu=function(){_this.setState({anchorEl:null,isOpen:false});if(_this.state.isLoggedIn){_this.props.history.push('/login');}};_this.state={anchorEl:null|HTMLElement,isOpen:false};_this.onSelection=_this.onSelection.bind(_assertThisInitialized(_this));_this.myRef=/*#__PURE__*/React.createRef();_this.onAccountDeletion=_this.onAccountDeletion.bind(_assertThisInitialized(_this));_this.deleteUser=_this.deleteUser.bind(_assertThisInitialized(_this));return _this;}_createClass(Header,[{key:\"onSelection\",value:function onSelection(){this.setState({anchorEl:null,isOpen:false});if(localStorage.getItem(ACCESS_TOKEN_NAME)){localStorage.removeItem(ACCESS_TOKEN_NAME);this.props.history.push('/');}else{this.props.history.push('/login');}}},{key:\"onAccountDeletion\",value:function onAccountDeletion(){Promise.resolve(this.deleteUser(this.props.playlistID)).then(function(){localStorage.removeItem(ACCESS_TOKEN_NAME);var cookies=new Cookies();cookies.remove('songName',{path:'/',secure:true});cookies.remove('songID',{path:'/',secure:true});window.location.reload();});}},{key:\"deleteUser\",value:function(){var _deleteUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",axios.post(API_BASE_URL+'/user/deleteUser',{},{headers:{\"auth-token\":localStorage.getItem(ACCESS_TOKEN_NAME)}}).catch(function(error){console.log(error);}));case 1:case\"end\":return _context.stop();}}},_callee);}));function deleteUser(){return _deleteUser.apply(this,arguments);}return deleteUser;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-expand-lg navbar-dark bg-dark\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarNavDropdown\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"navbar-nav\",children:/*#__PURE__*/_jsxs(\"li\",{className:\"nav-item dropdown\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"nav-link dropdown-toggle\",href:\"#\",id:\"navbarDropdownMenuLink\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"36\",height:\"36\",fill:localStorage.getItem(ACCESS_TOKEN_NAME)?\"orange\":\"currentColor\",className:\"bi bi-file-person-fill\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-1 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm-3 4c2.623 0 4.146.826 5 1.755V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-1.245C3.854 11.825 5.377 11 8 11z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"navbarDropdownMenuLink\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",onClick:this.onSelection,children:localStorage.getItem(ACCESS_TOKEN_NAME)?'Logout':'Login'}),/*#__PURE__*/_jsx(\"a\",{className:localStorage.getItem(ACCESS_TOKEN_NAME)?'dropdown-item':'',onClick:this.onAccountDeletion,href:\"#\",children:localStorage.getItem(ACCESS_TOKEN_NAME)?'Delete account':''})]})]})})}),/*#__PURE__*/_jsx(\"p\",{id:\"app-name\",children:\"Sound Track Box\"})]});}}]);return Header;}(React.Component);export default withRouter(Header);","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/MainComponents/Header/Header.js"],"names":["React","withRouter","ACCESS_TOKEN_NAME","axios","API_BASE_URL","Cookies","Header","props","openMenu","event","setState","anchorEl","currentTarget","isOpen","closeMenu","state","isLoggedIn","history","push","HTMLElement","onSelection","bind","myRef","createRef","onAccountDeletion","deleteUser","localStorage","getItem","removeItem","Promise","resolve","playlistID","then","cookies","remove","path","secure","window","location","reload","post","headers","catch","error","console","log","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Header.css'\nimport { withRouter } from \"react-router-dom\";\nimport { ACCESS_TOKEN_NAME } from '../../../constants/apiConstants';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../../../constants/apiConstants'\nimport Cookies from 'universal-cookie';\n\nclass Header extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            anchorEl: null | HTMLElement,\n            isOpen: false,\n        }\n        this.onSelection = this.onSelection.bind(this);\n        this.myRef = React.createRef();\n        this.onAccountDeletion = this.onAccountDeletion.bind(this);\n        this.deleteUser = this.deleteUser.bind(this);\n    }\n\n    openMenu = (event) => {\n        this.setState({ anchorEl: event.currentTarget, isOpen: true });\n    };\n\n    closeMenu = () => {\n        this.setState({\n            anchorEl: null,\n            isOpen: false\n        })\n        if (this.state.isLoggedIn) {\n            this.props.history.push('/login');\n        }\n    }\n\n    onSelection() {\n        this.setState({\n            anchorEl: null,\n            isOpen: false\n        })\n        if (localStorage.getItem(ACCESS_TOKEN_NAME)) {\n            localStorage.removeItem(ACCESS_TOKEN_NAME);\n            this.props.history.push('/');\n        } else {\n            this.props.history.push('/login');\n        }\n    }\n\n    onAccountDeletion() {\n        Promise.resolve(this.deleteUser(this.props.playlistID)).then(() => {\n            localStorage.removeItem(ACCESS_TOKEN_NAME);\n            const cookies = new Cookies();\n            cookies.remove('songName', { path: '/', secure: true });\n            cookies.remove('songID', { path: '/', secure: true });\n            window.location.reload();\n        }\n        );\n    }\n\n    async deleteUser() {\n        return axios.post(API_BASE_URL + '/user/deleteUser', {}, { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .catch(function (error) {\n                console.log(error);\n            })\n    }\n\n    render() {\n        return (\n            <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n                <div className=\"collapse navbar-collapse\" id=\"navbarNavDropdown\">\n                    <ul className=\"navbar-nav\">\n                        <li className=\"nav-item dropdown\">\n                            <a className=\"nav-link dropdown-toggle\"\n                                href=\"#\"\n                                id=\"navbarDropdownMenuLink\"\n                                data-toggle=\"dropdown\"\n                                aria-haspopup=\"true\"\n                                aria-expanded=\"false\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\"\n                                    width=\"36\" height=\"36\"\n                                    fill={localStorage.getItem(ACCESS_TOKEN_NAME) ? \"orange\" : \"currentColor\"}\n                                    className=\"bi bi-file-person-fill\"\n                                    viewBox=\"0 0 16 16\">\n                                    <path d=\"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-1 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm-3 4c2.623 0 4.146.826 5 1.755V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-1.245C3.854 11.825 5.377 11 8 11z\" />\n                                </svg>\n                            </a>\n                            <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\n                                <a className=\"dropdown-item\" onClick={this.onSelection}>{localStorage.getItem(ACCESS_TOKEN_NAME) ? 'Logout' : 'Login'}</a>\n                                <a className={localStorage.getItem(ACCESS_TOKEN_NAME) ? 'dropdown-item' : ''} onClick={this.onAccountDeletion} href=\"#\">{localStorage.getItem(ACCESS_TOKEN_NAME) ? 'Delete account' : ''}</a>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n                <p id=\"app-name\">Sound Track Box</p>\n            </nav>\n        );\n    }\n}\n\nexport default withRouter(Header);"]},"metadata":{},"sourceType":"module"}