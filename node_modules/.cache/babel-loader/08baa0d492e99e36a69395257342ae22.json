{"ast":null,"code":"import _regeneratorRuntime from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import{API_BASE_URL,ACCESS_TOKEN_NAME}from'../../constants/apiConstants';import{withRouter}from\"react-router-dom\";import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(props){var _useState=useState({email:\"\",password:\"\",successMessage:null,errorMessage:null}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,value=_e$target.value;setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},id,value));});};var loginPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(payload){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",axios.post(API_BASE_URL+'/user/login',payload).then(function(response){if(response.status<400){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'successMessage':'Login successful. Redirecting to home page..'});});localStorage.setItem(ACCESS_TOKEN_NAME,response.data);redirectToHome();}else{setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'errorMessage':response.data});});}}).catch(function(error){if(!error.response){alert('NETWORK ERROR');}else{setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'errorMessage':error.response.data});});}}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function loginPost(_x){return _ref.apply(this,arguments);};}();var handleSubmitClick=function handleSubmitClick(e){e.preventDefault();var payload={\"email\":state.email,\"password\":state.password};Promise.resolve(loginPost(payload)).catch(function(error){return console.log(error);});};var redirectToHome=function redirectToHome(){props.history.push('/');};var redirectToRegister=function redirectToRegister(){props.history.push('/register');};return/*#__PURE__*/_jsxs(Modal,{show:true,onHide:function onHide(){return redirectToHome();},animation:false,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:\"Login\"}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-left\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\",value:state.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-left\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Password\",value:state.password,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-check\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"btn btn-primary\",onClick:handleSubmitClick,children:\"Submit\"})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"registerMessage\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Dont have an account? \"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return redirectToRegister();},children:\"Register\"})]}),/*#__PURE__*/_jsx(\"section\",{class:state.errorMessage?\"alert alert-danger\":\"\",role:\"alert\",children:state.errorMessage})]})]});}export default withRouter(LoginForm);","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/Dialogs/LoginForm.js"],"names":["React","useState","axios","API_BASE_URL","ACCESS_TOKEN_NAME","withRouter","Modal","Button","LoginForm","props","email","password","successMessage","errorMessage","state","setState","handleChange","e","target","id","value","prevState","loginPost","payload","post","then","response","status","localStorage","setItem","data","redirectToHome","catch","error","alert","handleSubmitClick","preventDefault","Promise","resolve","console","log","history","push","redirectToRegister"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n\nimport axios from 'axios';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\nimport { withRouter } from \"react-router-dom\";\n\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\n\nfunction LoginForm(props) {\n    const [state, setState] = useState({\n        email: \"\",\n        password: \"\",\n        successMessage: null,\n        errorMessage: null,\n    })\n\n    const handleChange = (e) => {\n        const { id, value } = e.target\n        setState(prevState => ({\n            ...prevState,\n            [id]: value\n        }))\n    }\n\n    const loginPost = async (payload) => {\n        return axios.post(API_BASE_URL + '/user/login', payload)\n            .then(response => {\n                if (response.status < 400) {\n                    setState(prevState => ({\n                        ...prevState,\n                        'successMessage': 'Login successful. Redirecting to home page..'\n                    }))\n                    localStorage.setItem(ACCESS_TOKEN_NAME, response.data);\n                    redirectToHome();\n                }\n                else {\n                    setState(prevState => ({\n                        ...prevState,\n                        'errorMessage': response.data,\n                    }))\n                }\n            })\n            .catch(error => {\n                if (!error.response) {\n                    alert('NETWORK ERROR');\n                } else {\n                    setState(prevState => ({\n                        ...prevState,\n                        'errorMessage': error.response.data\n                    }))\n                }\n            });\n    }\n\n    const handleSubmitClick = (e) => {\n        e.preventDefault();\n        const payload = {\n            \"email\": state.email,\n            \"password\": state.password,\n        }\n\n        Promise.resolve(loginPost(payload)).catch(error => console.log(error));\n    }\n\n    const redirectToHome = () => {\n        props.history.push('/');\n    }\n    const redirectToRegister = () => {\n        props.history.push('/register');\n    }\n    return (\n        <Modal show={true} onHide={() => redirectToHome()} animation={false}>\n            <Modal.Header closeButton>\n                Login\n                </Modal.Header>\n            <Modal.Body>\n                <form>\n                    <div className=\"form-group text-left\">\n                        <label >Email address</label>\n                        <input type=\"email\"\n                            className=\"form-control\"\n                            id=\"email\"\n                            aria-describedby=\"emailHelp\"\n                            placeholder=\"Enter email\"\n                            value={state.email}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div className=\"form-group text-left\">\n                        <label>Password</label>\n                        <input type=\"password\"\n                            className=\"form-control\"\n                            id=\"password\"\n                            placeholder=\"Password\"\n                            value={state.password}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div className=\"form-check\">\n                    </div>\n                </form>\n                <Button\n                    type=\"submit\"\n                    className=\"btn btn-primary\"\n                    onClick={handleSubmitClick}\n                >Submit</Button>\n            </Modal.Body>\n            <Modal.Footer>\n                <section className=\"registerMessage\">\n                    <span>Dont have an account? </span>\n                    <button className=\"btn btn-primary\" onClick={() => redirectToRegister()}>Register</button>\n                </section>\n                <section class={state.errorMessage ? \"alert alert-danger\": \"\"} role=\"alert\">\n                {state.errorMessage}\n                </section>\n            </Modal.Footer>\n        </Modal>\n    )\n}\n\nexport default withRouter(LoginForm);"]},"metadata":{},"sourceType":"module"}