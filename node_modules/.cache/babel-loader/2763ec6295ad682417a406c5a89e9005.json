{"ast":null,"code":"var _jsxFileName = \"/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MusicCollection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playlistCollection: [],\n      isLoaded: false\n    };\n    this.onChangePlaylists = this.onChangePlaylists.bind(this);\n    this.reloadCollection = this.reloadCollection.bind(this);\n    this.addPlaylistPost = this.addPlaylistPost.bind(this);\n  }\n\n  componentDidMount() {\n    this.reloadCollection();\n  }\n\n  onChangePlaylists(playlistName) {\n    var data = Promise.resolve().then(this.addPlaylistPost(playlistName).then(result => {\n      console.log(result.affected.musicCollection);\n    }));\n  }\n\n  async addPlaylistPost(playlistName) {\n    return axios.post(API_BASE_URL + '/media/addPlaylist', {\n      name: playlistName\n    }, {\n      headers: {\n        \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME)\n      }\n    }).then(function (response) {\n      if (response.status === 200) {\n        return response.data;\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  async loadMusicCollectionGet() {\n    var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', {\n      headers: {\n        \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME)\n      }\n    }).then(res => {\n      return res.data;\n    }).catch(function (error) {\n      console.log(error);\n    });\n    return data;\n  }\n\n  reloadCollection() {\n    var musicCollection = Promise.resolve(this.loadMusicCollectionGet());\n    musicCollection.then(collection => {\n      this.setState({\n        isLoaded: true,\n        playlistCollection: collection\n      });\n    });\n  }\n\n  render() {\n    var isLoaded = this.state.isLoaded;\n    var playlistCollection = this.state.playlistCollection;\n\n    if (isLoaded) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(CreatePlaylistDialog, {\n          parentCallback: this.onChangePlaylists\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n          children: this.state.playlistCollection['musicCollection'].map((playlist, index) => {\n            return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: /*#__PURE__*/_jsxDEV(Playlist, {\n                playlistName: playlist.name,\n                songCollection: playlist.songList ? playlist.songList : [],\n                parentCallback: this.reloadCollection\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 41\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" is loading \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default MusicCollection;","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js"],"names":["React","axios","ListGroup","Playlist","API_BASE_URL","ACCESS_TOKEN_NAME","CreatePlaylistDialog","MusicCollection","Component","constructor","props","state","playlistCollection","isLoaded","onChangePlaylists","bind","reloadCollection","addPlaylistPost","componentDidMount","playlistName","data","Promise","resolve","then","result","console","log","affected","musicCollection","post","name","headers","localStorage","getItem","response","status","catch","error","loadMusicCollectionGet","get","res","collection","setState","render","map","playlist","index","songList"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\n\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog'\n\nclass MusicCollection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            playlistCollection: [],\n            isLoaded: false,\n        }\n        this.onChangePlaylists = this.onChangePlaylists.bind(this);\n        this.reloadCollection = this.reloadCollection.bind(this);\n        this.addPlaylistPost = this.addPlaylistPost.bind(this);\n    }\n\n    componentDidMount() {\n        this.reloadCollection();\n    }\n\n    onChangePlaylists(playlistName) {\n        var data = Promise.resolve()\n        .then(this.addPlaylistPost(playlistName).then(result => {\n            console.log(result.affected.musicCollection);\n        }));\n    }\n\n    async addPlaylistPost(playlistName) {\n        return axios.post(API_BASE_URL + '/media/addPlaylist', { name: playlistName }, { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n        .then(function (response) {\n            if (response.status === 200) {\n                return response.data;\n            }\n        })\n        .catch(function (error) {\n            console.log(error);\n        });\n    }\n\n    async loadMusicCollectionGet() {\n        var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(res => { return res.data }).catch(function (error) {\n                console.log(error);\n            })\n        return data;\n    }\n\n    reloadCollection() {\n        var musicCollection = Promise.resolve(this.loadMusicCollectionGet());\n        musicCollection.then((collection) => {\n            this.setState({\n                isLoaded: true,\n                playlistCollection: collection\n            })\n        });\n    }\n\n    render() {\n\n        var isLoaded = this.state.isLoaded;\n        var playlistCollection = this.state.playlistCollection;\n\n        if (isLoaded) {\n\n            return (\n                <div><CreatePlaylistDialog parentCallback={this.onChangePlaylists}>\n                </CreatePlaylistDialog>\n                    <ListGroup>\n                        {\n                            this.state.playlistCollection['musicCollection'].map((playlist, index) => {\n                                return (\n                                    <ListGroup.Item key={index}>\n                                        <Playlist\n                                            playlistName={playlist.name}\n                                            songCollection={playlist.songList ? playlist.songList : []}\n                                            parentCallback={this.reloadCollection}\n                                        >\n                                        </Playlist>\n                                    </ListGroup.Item>\n                                )\n                            })}\n\n                    </ListGroup>\n                </div>\n            )\n        } else {\n            return (\n                <h1> is loading </h1>\n            )\n        }\n    }\n}\n\nexport default MusicCollection;"]},"metadata":{},"sourceType":"module"}