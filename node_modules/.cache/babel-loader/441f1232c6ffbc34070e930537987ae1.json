{"ast":null,"code":"var _jsxFileName = \"/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MusicCollection = props => {\n  _s();\n\n  const [user, setUser] = useState({\n    musicCollection: []\n  });\n\n  const useEffect = () => {\n    Promise.resolve(this.loadMusicCollectionGet()).then(user => {\n      this.setState({\n        user: user\n      });\n    });\n  };\n\n  const onChangePlaylists = playlistName => {\n    Promise.resolve().then(this.addPlaylistPost(playlistName).then(result => {\n      setUser(result);\n    }));\n  };\n\n  const onSongChange = result => {\n    setUser(result);\n  };\n\n  const listOfPlaylists = user => {\n    return user['musicCollection'].map(playlist => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12\",\n        children: /*#__PURE__*/_jsxDEV(Playlist, {\n          playlistName: playlist.name,\n          playlistID: playlist._id,\n          songCollection: playlist.songList ? playlist.songList : [],\n          parentCallback: this.onSongChange,\n          updateCurrentSong: this.props.updateCurrentSong\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }, this)\n      }, playlist._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }, this);\n    });\n  };\n\n  const addPlaylistPost = async playlistName => {\n    return axios.post(API_BASE_URL + '/media/addPlaylist', {\n      name: playlistName\n    }, {\n      headers: {\n        \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME)\n      }\n    }).then(function (response) {\n      if (response.status === 200) {\n        return response.data.affected;\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const loadMusicCollectionGet = async () => {\n    var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', {\n      headers: {\n        \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME)\n      }\n    }).then(res => {\n      return res.data;\n    }).catch(function (error) {\n      console.log(error);\n    });\n    return data;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"flex-fill\",\n    children: [/*#__PURE__*/_jsxDEV(CreatePlaylistDialog, {\n      parentCallback: this.onChangePlaylists\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), this.listOfPlaylists(this.state.user)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MusicCollection, \"HulFTLVge4i7AGcyI/Ni/fQH7uQ=\");\n\n_c = MusicCollection;\nexport default MusicCollection;\n\nvar _c;\n\n$RefreshReg$(_c, \"MusicCollection\");","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js"],"names":["React","useState","useEffect","axios","Playlist","API_BASE_URL","ACCESS_TOKEN_NAME","CreatePlaylistDialog","MusicCollection","props","user","setUser","musicCollection","Promise","resolve","loadMusicCollectionGet","then","setState","onChangePlaylists","playlistName","addPlaylistPost","result","onSongChange","listOfPlaylists","map","playlist","name","_id","songList","updateCurrentSong","post","headers","localStorage","getItem","response","status","data","affected","catch","error","console","log","get","res","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\n\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog'\n\nconst MusicCollection = (props) => {\n    const [user, setUser] = useState({ musicCollection: [] });\n\n    const useEffect = () => {\n        Promise.resolve(this.loadMusicCollectionGet()).then((user) => {\n            this.setState({\n                user: user\n            });\n        })\n    }\n\n    const onChangePlaylists = (playlistName) => {\n        Promise.resolve()\n            .then(this.addPlaylistPost(playlistName).then(result => {\n                setUser(result);\n            }));\n    }\n\n    const onSongChange = (result) => {\n        setUser(result);\n    }\n\n    const listOfPlaylists = (user) => {\n        return user['musicCollection'].map((playlist) => {\n            return (\n                <div key={playlist._id} className=\"col-md-12\">\n                    <Playlist\n                        playlistName={playlist.name}\n                        playlistID={playlist._id}\n                        songCollection={playlist.songList ? playlist.songList : []}\n                        parentCallback={this.onSongChange}\n                        updateCurrentSong={this.props.updateCurrentSong}\n                    >\n                    </Playlist>\n                </div>\n            )\n        })\n    }\n\n    const addPlaylistPost = async (playlistName) => {\n        return axios.post(API_BASE_URL + '/media/addPlaylist', { name: playlistName }, { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(function (response) {\n                if (response.status === 200) {\n                    return response.data.affected;\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n\n    const loadMusicCollectionGet = async () => {\n        var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(res => { return res.data }).catch(function (error) {\n                console.log(error);\n            })\n        return data;\n    }\n\n    return (\n        <section className=\"flex-fill\">\n            <CreatePlaylistDialog parentCallback={this.onChangePlaylists} />\n            {\n                this.listOfPlaylists(this.state.user)\n            }\n        </section>\n    )\n}\n\nexport default MusicCollection;"]},"metadata":{},"sourceType":"module"}