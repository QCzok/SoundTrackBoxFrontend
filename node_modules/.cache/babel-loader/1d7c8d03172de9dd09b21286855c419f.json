{"ast":null,"code":"import _regeneratorRuntime from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jan/SoundTrackBoxFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Song.css';import axios from'axios';import{API_BASE_URL,ACCESS_TOKEN_NAME}from'../../constants/apiConstants';import Button from'react-bootstrap/Button';import Cookies from'universal-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Song=/*#__PURE__*/function(_React$Component){_inherits(Song,_React$Component);var _super=_createSuper(Song);function Song(props){var _this;_classCallCheck(this,Song);_this=_super.call(this,props);_this.deleteSong=_this.deleteSong.bind(_assertThisInitialized(_this));_this.handleOnClick=_this.handleOnClick.bind(_assertThisInitialized(_this));return _this;}_createClass(Song,[{key:\"deleteSong\",value:function deleteSong(){var _this2=this;var cookies=new Cookies();Promise.resolve(this.deleteSongPost(this.props.playlistID,this.props.songID)).then(function(result){return _this2.props.parentCallback(result);});if(cookies.get('songID')===this.props.songID){this.props.updateCurrentSong(undefined,undefined);}}},{key:\"deleteSongPost\",value:function(){var _deleteSongPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(playlistID,songID){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",axios.post(API_BASE_URL+'/media/deleteSong',{playlistID:playlistID,songID:songID},{headers:{\"auth-token\":localStorage.getItem(ACCESS_TOKEN_NAME)}}).then(function(response){if(response.status===200){return response.data.affected;}}).catch(function(error){console.log(error);}));case 1:case\"end\":return _context.stop();}}},_callee);}));function deleteSongPost(_x,_x2){return _deleteSongPost.apply(this,arguments);}return deleteSongPost;}()},{key:\"handleOnClick\",value:function handleOnClick(){this.props.updateCurrentSong(this.props.songName,this.props.songID);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"section\",{id:\"song-frame\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"delete-song\",className:\"nav-item dropdown\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"nav-link dropdown-toggle\",href:\"#\",id:\"navbarDropdownMenuLink\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",class:\"bi bi-file-music-fill\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-.5 4.11v1.8l-2.5.5v5.09c0 .495-.301.883-.662 1.123C7.974 12.866 7.499 13 7 13c-.5 0-.974-.134-1.338-.377-.36-.24-.662-.628-.662-1.123s.301-.883.662-1.123C6.026 10.134 6.501 10 7 10c.356 0 .7.068 1 .196V4.41a1 1 0 0 1 .804-.98l1.5-.3a1 1 0 0 1 1.196.98z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"navbarDropdownMenuLink\",children:/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",onClick:this.deleteSong,children:\"Delete this song\"})})]}),/*#__PURE__*/_jsx(Button,{id:\"song-item\",onClick:this.handleOnClick,children:this.props.songName})]});}}]);return Song;}(React.Component);export default Song;","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/Song.js"],"names":["React","axios","API_BASE_URL","ACCESS_TOKEN_NAME","Button","Cookies","Song","props","deleteSong","bind","handleOnClick","cookies","Promise","resolve","deleteSongPost","playlistID","songID","then","result","parentCallback","get","updateCurrentSong","undefined","post","headers","localStorage","getItem","response","status","data","affected","catch","error","console","log","songName","Component"],"mappings":"uhCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,CAAuBC,iBAAvB,KAAgD,8BAAhD,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,C,2FAEMC,CAAAA,I,wGACF,cAAYC,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBC,IAAhB,+BAAlB,CACA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBD,IAAnB,+BAArB,CAHe,aAIlB,C,2CAED,qBAAa,iBACT,GAAME,CAAAA,OAAO,CAAG,GAAIN,CAAAA,OAAJ,EAAhB,CACAO,OAAO,CAACC,OAAR,CAAgB,KAAKC,cAAL,CAAoB,KAAKP,KAAL,CAAWQ,UAA/B,CAA2C,KAAKR,KAAL,CAAWS,MAAtD,CAAhB,EAA+EC,IAA/E,CAAoF,SAACC,MAAD,QAAY,CAAA,MAAI,CAACX,KAAL,CAAWY,cAAX,CAA0BD,MAA1B,CAAZ,EAApF,EACA,GAAGP,OAAO,CAACS,GAAR,CAAY,QAAZ,IAA0B,KAAKb,KAAL,CAAWS,MAAxC,CAA+C,CAC3C,KAAKT,KAAL,CAAWc,iBAAX,CAA6BC,SAA7B,CAAwCA,SAAxC,EACH,CACJ,C,qHAED,iBAAqBP,UAArB,CAAiCC,MAAjC,kJACWf,KAAK,CAACsB,IAAN,CAAWrB,YAAY,CAAG,mBAA1B,CAA+C,CAAEa,UAAU,CAAEA,UAAd,CAA0BC,MAAM,CAAEA,MAAlC,CAA/C,CAA2F,CAAEQ,OAAO,CAAE,CAAE,aAAcC,YAAY,CAACC,OAAb,CAAqBvB,iBAArB,CAAhB,CAAX,CAA3F,EACFc,IADE,CACG,SAAUU,QAAV,CAAoB,CACtB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CACzB,MAAOD,CAAAA,QAAQ,CAACE,IAAT,CAAcC,QAArB,CACH,CACJ,CALE,EAOFC,KAPE,CAOI,SAAUC,KAAV,CAAiB,CACpBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CATE,CADX,wD,uIAaA,wBAAgB,CACZ,KAAKzB,KAAL,CAAWc,iBAAX,CAA6B,KAAKd,KAAL,CAAW4B,QAAxC,CAAkD,KAAK5B,KAAL,CAAWS,MAA7D,EACH,C,sBAED,iBAAS,CACL,mBACI,iBAAS,EAAE,CAAC,YAAZ,wBACI,aAAK,EAAE,CAAC,aAAR,CAAsB,SAAS,CAAC,mBAAhC,wBACI,UAAG,SAAS,CAAC,0BAAb,CACI,IAAI,CAAC,GADT,CAEI,EAAE,CAAC,wBAFP,CAGI,cAAY,UAHhB,CAII,gBAAc,MAJlB,CAKI,gBAAc,OALlB,uBAMI,YAAK,KAAK,CAAC,4BAAX,CAAwC,KAAK,CAAC,IAA9C,CAAmD,MAAM,CAAC,IAA1D,CAA+D,IAAI,CAAC,cAApE,CAAmF,KAAK,CAAC,uBAAzF,CAAiH,OAAO,CAAC,WAAzH,uBACI,aAAM,CAAC,CAAC,uUAAR,EADJ,EANJ,EADJ,cAWI,YAAK,SAAS,CAAC,eAAf,CAA+B,kBAAgB,wBAA/C,uBACI,UAAG,SAAS,CAAC,eAAb,CAA6B,OAAO,CAAE,KAAKR,UAA3C,8BADJ,EAXJ,GADJ,cAgBI,KAAC,MAAD,EAAQ,EAAE,CAAC,WAAX,CAAuB,OAAO,CAAE,KAAKE,aAArC,UAAqD,KAAKH,KAAL,CAAW4B,QAAhE,EAhBJ,GADJ,CAoBH,C,kBArDcnC,KAAK,CAACoC,S,EAwDzB,cAAe9B,CAAAA,IAAf","sourcesContent":["import React from 'react';\nimport './Song.css';\nimport axios from 'axios';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\nimport Button from 'react-bootstrap/Button';\nimport Cookies from 'universal-cookie';\n\nclass Song extends React.Component {\n    constructor(props) {\n        super(props);\n        this.deleteSong = this.deleteSong.bind(this);\n        this.handleOnClick = this.handleOnClick.bind(this);\n    }\n\n    deleteSong() {\n        const cookies = new Cookies();\n        Promise.resolve(this.deleteSongPost(this.props.playlistID, this.props.songID)).then((result) => this.props.parentCallback(result));\n        if(cookies.get('songID') === this.props.songID){\n            this.props.updateCurrentSong(undefined, undefined);\n        }\n    }\n\n    async deleteSongPost(playlistID, songID) {\n        return axios.post(API_BASE_URL + '/media/deleteSong', { playlistID: playlistID, songID: songID }, { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(function (response) {\n                if (response.status === 200) {\n                    return response.data.affected;\n                }\n            }\n            )\n            .catch(function (error) {\n                console.log(error);\n            })\n    }\n\n    handleOnClick() {\n        this.props.updateCurrentSong(this.props.songName, this.props.songID)\n    }\n\n    render() {\n        return (\n            <section id=\"song-frame\">\n                <div id=\"delete-song\" className=\"nav-item dropdown\">\n                    <a className=\"nav-link dropdown-toggle\"\n                        href=\"#\"\n                        id=\"navbarDropdownMenuLink\"\n                        data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\"\n                        aria-expanded=\"false\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-file-music-fill\" viewBox=\"0 0 16 16\">\n                            <path d=\"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-.5 4.11v1.8l-2.5.5v5.09c0 .495-.301.883-.662 1.123C7.974 12.866 7.499 13 7 13c-.5 0-.974-.134-1.338-.377-.36-.24-.662-.628-.662-1.123s.301-.883.662-1.123C6.026 10.134 6.501 10 7 10c.356 0 .7.068 1 .196V4.41a1 1 0 0 1 .804-.98l1.5-.3a1 1 0 0 1 1.196.98z\" />\n                        </svg>\n                    </a>\n                    <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\n                        <a className=\"dropdown-item\" onClick={this.deleteSong}>Delete this song</a>\n                    </div>\n                </div>\n                <Button id=\"song-item\" onClick={this.handleOnClick}>{this.props.songName}</Button>\n            </section>\n        );\n    }\n}\n\nexport default Song;"]},"metadata":{},"sourceType":"module"}