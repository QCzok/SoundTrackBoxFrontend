{"ast":null,"code":"var _jsxFileName = \"/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js\";\nimport React from 'react';\nimport './MusicCollection.css';\nimport axios from 'axios';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MusicCollection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playlistCollection: null\n    };\n    this.onChangePlaylists = this.onChangePlaylists.bind(this);\n    this.reloadCollection = this.reloadCollection.bind(this);\n    this.addPlaylistPost = this.addPlaylistPost.bind(this);\n    this.onSongChange = this.onSongChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.reloadCollection();\n  }\n\n  onChangePlaylists(playlistName) {\n    Promise.resolve().then(this.addPlaylistPost(playlistName).then(result => {\n      this.setState({\n        playlistCollection: result\n      });\n    }));\n  }\n\n  onSongChange(result) {\n    this.setState({\n      playlistCollection: result\n    });\n  }\n\n  async addPlaylistPost(playlistName) {\n    return axios.post(API_BASE_URL + '/media/addPlaylist', {\n      name: playlistName\n    }, {\n      headers: {\n        \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME)\n      }\n    }).then(function (response) {\n      if (response.status === 200) {\n        return response.data.affected;\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  async loadMusicCollectionGet() {\n    var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', {\n      headers: {\n        \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME)\n      }\n    }).then(res => {\n      return res.data;\n    }).catch(function (error) {\n      console.log(error);\n    });\n    return data;\n  }\n\n  reloadCollection() {\n    Promise.resolve(this.loadMusicCollectionGet()).then(collection => {\n      this.setState({\n        playlistCollection: collection\n      });\n    });\n  }\n\n  render() {\n    if (this.state.playlistCollection) {\n      return /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"library\",\n        children: [/*#__PURE__*/_jsxDEV(CreatePlaylistDialog, {\n          id: \"createPlaylistDialog\",\n          parentCallback: this.onChangePlaylists\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group collection\",\n          children: [\" \", this.state.playlistCollection['musicCollection'].map(playlist => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              id: \"frame\",\n              className: \"list-group-item\",\n              children: [/*#__PURE__*/_jsxDEV(Playlist, {\n                playlistName: playlist.name,\n                playlistID: playlist._id,\n                songCollection: playlist.songList ? playlist.songList : [],\n                parentCallback: this.onSongChange,\n                updateCurrentSong: this.props.updateCurrentSong\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 29\n              }, this), \" \"]\n            }, playlist._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 34\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 20\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 22\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-border\",\n          role: \"status\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sr-only\",\n            children: \" Loading... \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 22\n      }, this);\n    }\n  }\n\n}\n\nexport default MusicCollection;","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js"],"names":["React","axios","Playlist","API_BASE_URL","ACCESS_TOKEN_NAME","CreatePlaylistDialog","MusicCollection","Component","constructor","props","state","playlistCollection","onChangePlaylists","bind","reloadCollection","addPlaylistPost","onSongChange","componentDidMount","playlistName","Promise","resolve","then","result","setState","post","name","headers","localStorage","getItem","response","status","data","affected","catch","error","console","log","loadMusicCollectionGet","get","res","collection","render","map","playlist","_id","songList","updateCurrentSong"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './MusicCollection.css';\nimport axios from 'axios';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\n\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog'\n\nclass MusicCollection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            playlistCollection: null,\n        }\n        this.onChangePlaylists = this.onChangePlaylists.bind(this);\n        this.reloadCollection = this.reloadCollection.bind(this);\n        this.addPlaylistPost = this.addPlaylistPost.bind(this);\n        this.onSongChange = this.onSongChange.bind(this);\n    }\n\n    componentDidMount() {\n        this.reloadCollection();\n    }\n\n    onChangePlaylists(playlistName) {\n        Promise.resolve()\n            .then(this.addPlaylistPost(playlistName).then(result => {\n                this.setState({\n                    playlistCollection: result\n                });\n            }));\n    }\n\n    onSongChange(result) {\n        this.setState({\n            playlistCollection: result\n        });\n    }\n\n    async addPlaylistPost(playlistName) {\n        return axios.post(API_BASE_URL + '/media/addPlaylist', { name: playlistName }, { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(function(response) {\n                if (response.status === 200) {\n                    return response.data.affected;\n                }\n            })\n            .catch(function(error) {\n                console.log(error);\n            });\n    }\n\n    async loadMusicCollectionGet() {\n        var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(res => { return res.data }).catch(function(error) {\n                console.log(error);\n            })\n        return data;\n    }\n\n    reloadCollection() {\n        Promise.resolve(this.loadMusicCollectionGet()).then((collection) => {\n            this.setState({\n                playlistCollection: collection\n            });\n        })\n    }\n\n    render() {\n        if (this.state.playlistCollection) {\n            return ( <\n                section className = 'library' >\n                <\n                CreatePlaylistDialog id = \"createPlaylistDialog\"\n                parentCallback = { this.onChangePlaylists }\n                /> <\n                ul className = \"list-group collection\" > {\n                    this.state.playlistCollection['musicCollection'].map((playlist) => {\n                        return ( <\n                            li id = \"frame\"\n                            className = \"list-group-item\"\n                            key = { playlist._id } >\n                            <\n                            Playlist playlistName = { playlist.name }\n                            playlistID = { playlist._id }\n                            songCollection = { playlist.songList ? playlist.songList : [] }\n                            parentCallback = { this.onSongChange }\n                            updateCurrentSong = { this.props.updateCurrentSong } >\n                            <\n                            /Playlist> <\n                            /li>\n                        )\n                    })\n                }\n\n                <\n                /ul> <\n                /section>\n            )\n        } else {\n            return ( <\n                div className = \"d-flex justify-content-center\" >\n                <\n                div className = \"spinner-border\"\n                role = \"status\" >\n                <\n                span className = \"sr-only\" > Loading... < /span> <\n                /div> <\n                /div>\n            )\n        }\n    }\n}\n\nexport default MusicCollection;"]},"metadata":{},"sourceType":"module"}