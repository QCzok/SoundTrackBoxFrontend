{"ast":null,"code":"var _jsxFileName = \"/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MusicCollection extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.listOfPlaylists = user => {\n      return user['musicCollection'].map(playlist => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(Playlist, {\n            playlistName: playlist.name,\n            playlistID: playlist._id,\n            songCollection: playlist.songList ? playlist.songList : [],\n            parentCallback: this.onSongChange,\n            updateCurrentSong: this.props.updateCurrentSong\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 21\n          }, this)\n        }, playlist._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 17\n        }, this);\n      });\n    };\n\n    this.state = {\n      user: {\n        musicCollection: []\n      }\n    };\n    this.onChangePlaylists = this.onChangePlaylists.bind(this);\n    this.addPlaylistPost = this.addPlaylistPost.bind(this);\n    this.onSongChange = this.onSongChange.bind(this);\n  }\n\n  componentDidMount() {\n    Promise.resolve(this.loadMusicCollectionGet()).then(user => {\n      this.setState({\n        user: user\n      });\n    });\n  }\n\n  onChangePlaylists(playlistName) {\n    Promise.resolve().then(this.addPlaylistPost(playlistName).then(result => {\n      this.setState({\n        user: result\n      });\n    }));\n  }\n\n  onSongChange(result) {\n    this.setState({\n      user: result\n    });\n  }\n\n  async addPlaylistPost(playlistName) {\n    return axios.post(API_BASE_URL + '/media/addPlaylist', {\n      name: playlistName\n    }, {\n      headers: {\n        \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME)\n      }\n    }).then(function (response) {\n      if (response.status === 200) {\n        return response.data.affected;\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  async loadMusicCollectionGet() {\n    var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', {\n      headers: {\n        \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME)\n      }\n    }).then(res => {\n      return res.data;\n    }).catch(function (error) {\n      console.log(error);\n    });\n    return data;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(CreatePlaylistDialog, {\n        parentCallback: this.onChangePlaylists\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), this.listOfPlaylists(this.state.user)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default MusicCollection;","map":{"version":3,"sources":["/home/jan/SoundTrackBoxFrontend/src/components/MusicCollection/MusicCollection.js"],"names":["React","axios","Playlist","API_BASE_URL","ACCESS_TOKEN_NAME","CreatePlaylistDialog","MusicCollection","Component","constructor","props","listOfPlaylists","user","map","playlist","name","_id","songList","onSongChange","updateCurrentSong","state","musicCollection","onChangePlaylists","bind","addPlaylistPost","componentDidMount","Promise","resolve","loadMusicCollectionGet","then","setState","playlistName","result","post","headers","localStorage","getItem","response","status","data","affected","catch","error","console","log","get","res","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport Playlist from './Playlist';\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\n\nimport CreatePlaylistDialog from '../Dialogs/CreatePlaylistDialog'\n\nclass MusicCollection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            user: { musicCollection: [] },\n        }\n        this.onChangePlaylists = this.onChangePlaylists.bind(this);\n        this.addPlaylistPost = this.addPlaylistPost.bind(this);\n        this.onSongChange = this.onSongChange.bind(this);\n    }\n\n    componentDidMount() {\n        Promise.resolve(this.loadMusicCollectionGet()).then((user) => {\n            this.setState({\n                user: user\n            });\n        })\n    }\n\n    onChangePlaylists(playlistName) {\n        Promise.resolve()\n            .then(this.addPlaylistPost(playlistName).then(result => {\n                this.setState({\n                    user: result\n                });\n            }));\n    }\n\n    onSongChange(result) {\n        this.setState({\n            user: result\n        });\n    }\n\n    listOfPlaylists = (user) => {\n        return user['musicCollection'].map((playlist) => {\n            return (\n                <div key={playlist._id} className=\"col-md-12\">\n                    <Playlist\n                        playlistName={playlist.name}\n                        playlistID={playlist._id}\n                        songCollection={playlist.songList ? playlist.songList : []}\n                        parentCallback={this.onSongChange}\n                        updateCurrentSong={this.props.updateCurrentSong}\n                    >\n                    </Playlist>\n                </div>\n            )\n        })\n    }\n\n    async addPlaylistPost(playlistName) {\n        return axios.post(API_BASE_URL + '/media/addPlaylist', { name: playlistName }, { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(function (response) {\n                if (response.status === 200) {\n                    return response.data.affected;\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n\n    async loadMusicCollectionGet() {\n        var data = axios.get(API_BASE_URL + '/media/loadMusicCollection', { headers: { \"auth-token\": localStorage.getItem(ACCESS_TOKEN_NAME) } })\n            .then(res => { return res.data }).catch(function (error) {\n                console.log(error);\n            })\n        return data;\n    }\n\n    render() {\n\n        return (\n            <div className=\"row\">\n                <CreatePlaylistDialog parentCallback={this.onChangePlaylists} />\n                {\n                    this.listOfPlaylists(this.state.user)\n                }\n            </div>\n        )\n    }\n}\n\nexport default MusicCollection;"]},"metadata":{},"sourceType":"module"}